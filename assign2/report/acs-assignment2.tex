% !TEX TS-program = pdflatex
\documentclass[11pt,a4paper,english]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[obeyspaces, hyphens]{url}
\usepackage[top=4cm, bottom=4cm, left=3cm, right=3cm]{geometry}
\usepackage{enumerate}
\usepackage{amsmath}
\usepackage{mdwlist}
\usepackage{fancyhdr}
\usepackage{cite}
\usepackage{amsmath}
\usepackage[normalem]{ulem} % ulem enables strikethrough and more, but makes
                            % \emph underline by default :(
\usepackage{babel}
\usepackage{fancyvrb}
\usepackage{verbatimbox}
\usepackage{amsfonts}
\usepackage{amsthm}
%\usepackage{minted}
\usepackage{xcolor}
\usepackage{csquotes}
\usepackage{listings}
\usepackage{graphicx}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{booktabs}
\usepackage{array}
\usepackage{lmodern} % better font
\usepackage[noend]{algpseudocode}
\usepackage{algorithm}
\usepackage{tikz}
\usetikzlibrary{arrows, decorations.markings}
\usepackage{hyperref} % always load hyper ref in the end
\newcolumntype{P}[1]{>{\centering\arraybackslash}p{#1}}

\newcommand*\justify{%
  \fontdimen2\font=0.4em% interword space
  \fontdimen3\font=0.2em% interword stretch
  \fontdimen4\font=0.1em% interword shrink
  \fontdimen7\font=0.1em% extra space
  \hyphenchar\font=`\-% allowing hyphenation
}

\lstset{
    frame=lrtb,
    captionpos=b,
    belowskip=0pt
}

\captionsetup[listing]{aboveskip=5pt,belowskip=\baselineskip}

\newcommand{\todo}[1]{\textcolor{red}{\textbf{TODO: }#1}}

%\definecolor{lightgray}{rgb}{0.95,0.95,0.95}
%\renewcommand\listingscaption{Code}

\newcommand{\concat}{\ensuremath{+\!\!\!\!+\!\!}}

\pagestyle{fancy}
\headheight 35pt

\DefineVerbatimEnvironment{code}{Verbatim}{fontsize=\small}
\DefineVerbatimEnvironment{example}{Verbatim}{fontsize=\small}
\newcommand{\ignore}[1]{}

\hyphenation{character-ised}

\rhead{Assignment 2}
\lhead{ACS}
\begin{document}

\thispagestyle{empty} %fjerner sidetal
\hspace{6cm} \vspace{6cm}
\begin{center}
\textbf{\Huge {Advanced Computer Systems}}\\ \vspace{0.5cm}
\Large{Assignment 2}
\end{center}
\vspace{3cm}
\begin{center}
\Large{\textbf{Truls Asheim, Rasmus Wriedt Larsen, Viktor Hansen}}
\end{center}
\vspace{6.0cm}
\thispagestyle{empty}

\newpage

\section{Exercises}

\subsection{Serializability \& Locking}

\subsubsection{Scenario 1}

\begin{figure}[H]
\centering
\begin{tikzpicture}
  \node[draw,circle] (t1) at (0,0) {$T_1$};
  \node[draw,circle] (t2) at (-1,-1.25) {$T_2$};
  \node[draw,circle] (t3) at (1,-1.25) {$T_3$};

  \draw [->] (t1) -- (t2);
  \draw [->] (t2) -- (t3);
  \draw [->] (t3) -- (t1);
\end{tikzpicture}
\end{figure}

%T1 precedes T2 (because of X)
%T2 precedes T3 (because of Z)
%T3 precedes T1 (because of Y)

As there is a cycle in the precedence graph, the schedule is \emph{not} conflict-serializable.

This schedule could not have been generated by strict two-phase locking
(non-conservative). The reason is \texttt{T1} will aquire a shared lock on
\texttt{X} initially, so \texttt{T2} will need to wait for \texttt{T1} to
commit, before it can get an exclusive lock on \texttt{X} for \texttt{W(X)}.

\subsubsection{Scenario 2}


\begin{figure}[H]
\centering
\begin{tikzpicture}
  \node[draw,circle] (t1) at (0,0) {$T_1$};
  \node[draw,circle] (t2) at (-1,-1.25) {$T_2$};
  \node[draw,circle] (t3) at (1,-1.25) {$T_3$};

  \draw [->] (t3) -- (t2);
  \draw [->] (t1) -- (t2);
\end{tikzpicture}
\end{figure}

%T3 precedes T2 (because of Z)
%T1 precedes T2 (because of Y and X)

As there is no cycles in the precedence graph, the schedule is conflict-serializable.

This schedule could be generated by strict two-phase locking (non-conservative),
as illustrated below.

\begin{verbatim}
T1: S(X)                            X(Y)  c
T2:                    S(Z)                       X(X) X(Y) C
T3:        X(Z)   C
\end{verbatim}

\subsection{Questions 2: Optimistic Concurrency Control}
\paragraph{Scenario 1}
\paragraph{Scenario 2}
\paragraph{Scenario 3}

\section{Programming Assignments}
\subsection{Implementation}

\subsection{Questions for Concurrent Implementation of Bookstore}
\subsubsection{Description of Implementation}
\begin{enumerate}[(a)]
\item{Answer here!}
\item{Answer here!}
\end{enumerate}

\subsubsection{Correctness of Locking Protocol}
\subsubsection{Deadlock Occurrence}
\subsubsection{Scalability}
\subsubsection{Locking Overhead}


\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:
